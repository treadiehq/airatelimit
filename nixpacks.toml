[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm install"]

[phases.build]
cmds = [
  "echo '=== Starting build ==='",
  "npm run build",
  "echo '=== Build complete, checking dist/ ==='",
  "ls -la",
  "ls -la dist/ || echo 'dist/ does not exist!'",
  "cat dist/main.js | head -5 || echo 'main.js does not exist!'"
]

[start]
cmd = "node dist/main.js"
